
@{
    ViewBag.Title = "Report";
    Layout = "~/Views/Shared/_HomeLayoutPage.cshtml";
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.22/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>

<div class="content-wrapper" style="margin:10px !important;">
    <section class="content">
        <div class="container-fluid" ng-app="Reports" ng-controller="ReportData">
            <div class="card">
                <div class="card-header">
                    <h6 class="card-title"><strong>Reports</strong></h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="input-group" style="margin-bottom:10px !important">

                                <span class="input-group-text">Date From</span>

                                <input type="date" required ng-model="datefrom" class="form-control" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="input-group" style="margin-bottom:10px !important">

                                <span class="input-group-text">Date To</span>

                                <input type="date" required ng-model="dateto" class="form-control" />
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="input-group" style="margin-bottom:10px !important">
                                <span class="input-group-text">Bank</span>
                                <select class="form-control" ng-model="sortCode">
                                    <option value="0">--Select Bank--</option>
                                    <option ng-repeat="x in myData" value="{{x.code}}">
                                        {{x.name}}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="input-group">
                                <button class="btn btn-success" ng-click="SearchReport()">Search</button>
                            </div>
                        </div>
                    </div><hr />

                    @using (Html.BeginForm("Convert", "Home", FormMethod.Post))
                    {
                        <input type="hidden" class="form-control" ng-model="dFrom" value="{{dFrom}}"  name="dFrom" />
                        <input type="hidden" class="form-control" ng-model="dTo" value="{{dTo}}" name="dTo" />
                        <input type="hidden" class="form-control" ng-model="sCode" value="{{sCode}}" name="sCode" />
                        <button class="btn btn-success" ng-if="responseCode=='00'">Export to PDF</button>
                    }
                    <!--<button class="btn btn-success" ng-click="export()" ng-if="responseCode=='00'">Export to PDF</button>-->
                    <div class="row" ng-if="responseCode=='00'" id="PrintThis" style="font-size:larger !important">
                        <div class="col-lg-12">
                            <div class="container">
                                <div class="panel panel-default">
                                    <!--<div class="panel-heading">
                    <div class="row">
                        <div class="col-md-12"><strong>-->
                                    <!--<img src="~/Content/Image/ipsllogo.png" height="40" />-->
                                    <!--</strong></div>
                        </div>
                    </div>-->
                                    <div class="panel-body">

                                        <div class="row">
                                            <!--<table class="table table-bordered">
    <tr><td class="col-md-1"><img src="~/Content/Image/logoipsl.png" /></td><td class="col-md-11" align="center"><strong>BANKS EFFICIENCY AND COMPLIANCE RATING <br />ANALYSIS FOR {{headingDate}}<br /><center><strong>BANK:{{BankName}}</strong></center></strong></td>-->
                                            <!--<td class="col-md-4" align="left"><strong></strong></td>--><!--</tr>-->
                                            <!--<tr><td align="right"><strong>BANK:</strong></td><td><strong>{{BankName}}</strong></td></tr>-->
                                            <!--</table>-->
                                            <table class="tablez table-borderedz">
                                                <tr><td class="col-md-1z"><img src="~/Content/Image/logoipsl.png" /></td></tr>
                                                <tr>
                                                    <td>
                                                        <strong>
                                                            <h4>INTEGRATED PAYMENT SERVICES LIMITED</h4>
                                                        </strong>
                                                    </td>
                                                </tr>
                                                <tr><td class="col-md-11z" align="left" colspan="2"><h5>BANKS EFFICIENCY AND COMPLIANCE RATING</h5><h6> ANALYSIS FOR {{headingDate}}</h6></td></tr>
                                                <tr><td align="left"><strong>BANK: {{BankName}}</strong></td><td align="left"></td></tr>
                                                </table>

                                        </div>
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <table class="table table-striped">
                                                    <tr>
                                                        <td colspan="3"></td>
                                                        <th colspan="3">ANALYSIS FOR <br /> {{headingDate}}</th>
                                                        <th>&nbsp;&nbsp;</th>
                                                        <th colspan="3">ANALYSIS FOR <br />{{WeeklyDate}}</th>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <th class="col-sm-1">OPERATIONAL PLATFROMS</th>
                                                        <th class="col-sm-8">MEASURES</th>
                                                        <th class="col-sm-1">ASSESSMENT<br /><small><strong><i>Expected Score=0.00%</i></strong></small></th>
                                                        <th class="col-sm-1">RANKING</th>
                                                        <th class="col-sm-1">BEST BANK RANKING</th>
                                                        <th>&nbsp;&nbsp;</th>
                                                        <th class="col-sm-1">ASSESSMENT<br /><small><strong><i>Expected Score=0.00%</i></strong></small></th>
                                                        <th class="col-sm-1">RANKING</th>
                                                        <th class="col-sm-1">BEST BANK RANKING</th>
                                                    </tr>
                                                    <tr>
                                                        <td class="col-sm-1">1</td>
                                                        <td><strong>PESALINK</strong></td>
                                                        <td><strong>1. Trans. Failure</strong></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td><strong>1.) INWARD</strong></td>
                                                        <td><i>(Code 114) - no account requested</i></td>
                                                        <td>{{In114}}</td>
                                                        <td>{{In114r}}</td>
                                                        <td>{{In114bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In114w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 911) - Issuer timed out </i></td>
                                                        <td>{{In911}}</td>
                                                        <td>{{In911r}}</td>
                                                        <td>{{In911bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In911w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 111) -  Invalid Card Number</i></td>
                                                        <td>{{In111}}</td>
                                                        <td>{{In111r}}</td>
                                                        <td>{{In111bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In111w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 912) Card Issuer Unavailable</i></td>
                                                        <td>{{In912}}</td>
                                                        <td>{{In912r}}</td>
                                                        <td>{{In912bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In912w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 400) - Accepted (for reversal) </i></td>
                                                        <td>{{In400}}</td>
                                                        <td>{{In400r}}</td>
                                                        <td>{{In400bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In400w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 100) - (no comments)</i></td>
                                                        <td>{{In100}}</td>
                                                        <td>{{In100r}}</td>
                                                        <td>{{In100bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In100w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 102) - Suspected Fraud</i></td>
                                                        <td>{{In102}}</td>
                                                        <td>{{In102r}}</td>
                                                        <td>{{In102bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In102w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 120) - Transaction not permitted to terminal</i></td>
                                                        <td>{{In120}}</td>
                                                        <td>{{In120r}}</td>
                                                        <td>{{In120bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In120w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 118) - no card record</i></td>
                                                        <td>{{In118}}</td>
                                                        <td>{{In118r}}</td>
                                                        <td>{{In118bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{In118w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td><strong>2.) OUTWARD</strong></td>
                                                        <td><i>(Code 102) - Suspected fraud</i></td>
                                                        <td>{{Out102}}</td>
                                                        <td>{{Out102r}}</td>
                                                        <td>{{Out102bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out102w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 114) - no acct requested</i></td>
                                                        <td>{{Out114}}</td>
                                                        <td>{{Out114r}}</td>
                                                        <td>{{Out114bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out114w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 111) - invalid card number</i></td>
                                                        <td>{{Out111}}</td>
                                                        <td>{{Out111r}}</td>
                                                        <td>{{Out111bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out111w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 912) Issuer unavailable</i></td>
                                                        <td>{{Out912}}</td>
                                                        <td>{{Out912r}}</td>
                                                        <td>{{Out912bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out912w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 911) - Issuer timed out</i></td>
                                                        <td>{{Out911}}</td>
                                                        <td>{{Out911r}}</td>
                                                        <td>{{Out911bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out911w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>

                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 100) - (no comments)</i></td>
                                                        <td>{{Out100}}</td>
                                                        <td>{{Out100r}}</td>
                                                        <td>{{Out100bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out100w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 400) - Accepted (for reversal)</i></td>
                                                        <td>{{Out400}}</td>
                                                        <td>{{Out400r}}</td>
                                                        <td>{{Out400bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out400w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 120) - Transaction not permitted to terminal</i></td>
                                                        <td>{{Out120}}</td>
                                                        <td>{{Out120r}}</td>
                                                        <td>{{Out120bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out120w}}</td>
                                                        <td></td>
                                                        <td>{{Out120bb}}%</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>(Code 118) - no card record</i></td>
                                                        <td>{{Out118}}</td>
                                                        <td>{{Out118r}}</td>
                                                        <td>{{Out118bb}}%</td>
                                                        <td>&nbsp;&nbsp;</td>
                                                        <td>{{Out118w}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>
                                                    <tr style="height:20px !important">
                                                        <td class="col-sm-1z"><strong></strong></td>
                                                        <td><strong></strong></td>
                                                        <td><strong></strong></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td style="border: none; !important;"></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="col-sm-1z"><strong>2</strong></td>
                                                        <td><strong>NETWORK CONNECTIVITY</strong></td>
                                                        <td><strong>1. Link Average Downtime</strong></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td style="border: none; !important;"></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><i>Link Availability</i></td>
                                                        <td>{{link}}%</td>
                                                        <td>{{linkr}}</td>
                                                        <td>{{linkbb}}%</td>
                                                        <td style="border: none; !important;">&nbsp;&nbsp;</td>
                                                        <td>{{linkw}}</td>
                                                        <td></td>
                                                        <td>0.00%</td>
                                                    </tr>





                                                </table>
                                            </div>
                                            @*<div class="col-lg-3">
                                    <table class="table table-striped">
                                        <tr>

                                            <th colspan="3">ANALYSIS FOR JULY 23 - JULY 30, 2020</th>
                                        </tr>
                                        <tr>
                                            <th>ASSESSMENT<br /><small><strong><i>Expected Score=0.00%</i></strong></small></th>
                                            <th>RANKING</th>
                                            <th>BEST BANK RANKING</th>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>

                                        </tr>

                                        <tr>

                                            <td>0.02%</td>
                                            <td>13th</td>
                                            <td>0.00%</td>
                                        </tr>
                                        <tr>

                                            <td>1.09%</td>
                                            <td>21st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.02%</td>
                                            <td>13th</td>
                                            <td>0.00%</td>
                                        </tr>
                                        <tr>

                                            <td>1.09%</td>
                                            <td>21st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>

                                        <tr>

                                            <td>0.00%</td>
                                            <td>1st</td>
                                            <td>0.00%</td>
                                        </tr>


                                    </table>
                                </div>*@
                                        </div>
                                    </div>
                                    <div class="panel-footer">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" ng-if="responseCode!='00'">
                        <div class="card">
                            <div class="card-body">{{noresult}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
</div>
<!--<div ng-show="blackout" style="position:fixed; z-index: 220; top:0; left:0; bottom:0; right:0;background:rgba(0,0,0,.5);margin: auto">
    <center>Loading...</center>
</div>-->
<script src="~/Scripts/app/Report.js"></script>